---
import ProjectGrid from '../components/ProjectGrid.jsx';
import { getProjects } from '../utils/notion.js';

// Fetch live project data from the Notion API.
// This is now the single source of truth for the project list.
const projects = await getProjects();
---

<html lang="en">
<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width" />
  <meta name="generator" content={Astro.generator} />
  <title>Cathedral of Unfinished Dreams</title>

  <!-- Basic global styles for the dark theme, as per the design document. -->
  <style is:global>
    body {
      background-color: #111827; /* Tailwind's gray-900 */
      color: #f3f4f6; /* Tailwind's gray-100 */
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }
  </style>
</head>
<body>
  <main class="container mx-auto px-4 py-12 md:py-16">
    <header class="text-center mb-12 md:mb-16">
      <h1 class="text-4xl md:text-5xl font-extrabold text-white tracking-tighter">
        The Cathedral is Open
      </h1>
      <p class="text-gray-400 mt-4 max-w-2xl mx-auto leading-relaxed">
        Browse a library of developing ideas. Fund resonance, not completion. The exploration is the value.
      </p>
    </header>

    <!-- Render the React component. `client:only="react"` tells Astro to hydrate this on the client. -->
    <ProjectGrid projects={projects} client:only="react" />

  </main>
</body>
</html>
